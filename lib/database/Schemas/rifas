create table public.rifas (
  id uuid not null default extensions.uuid_generate_v4 (),
  titulo character varying(255) not null,
  descripcion text null,
  precio_ticket numeric(10, 2) not null,
  imagen_url character varying(500) null,
  estado character varying(50) null default 'activa'::character varying,
  fecha_creacion timestamp without time zone null default now(),
  fecha_cierre timestamp without time zone null,
  total_tickets integer null default 0,
  tickets_disponibles integer null default 0,
  categoria_id uuid null,
  numero_tickets_comprar jsonb null default '[1, 2, 3, 5, 10]'::jsonb,
  progreso_manual numeric null,
  tipo_rifa character varying(100) null default 'vehiculo'::character varying,
  fecha_culminacion timestamp without time zone null,
  categoria character varying(100) null default 'automovil'::character varying,
  marca character varying(100) null,
  modelo character varying(100) null,
  ano integer null,
  color character varying(100) null,
  valor_estimado_usd numeric(12, 2) null,
  destacada boolean null default false,
  orden integer null default 0,
  slug character varying(255) null,
  constraint rifas_pkey primary key (id),
  constraint rifas_categoria_id_fkey foreign KEY (categoria_id) references categorias_rifas (id),
  constraint rifas_estado_check check (
    (
      (estado)::text = any (
        array[
          ('activa'::character varying)::text,
          ('cerrada'::character varying)::text
        ]
      )
    )
  )
) TABLESPACE pg_default;

create index IF not exists idx_rifas_estado_destacada on public.rifas using btree (estado, destacada) TABLESPACE pg_default;

create index IF not exists idx_rifas_tipo on public.rifas using btree (tipo_rifa) TABLESPACE pg_default;

create index IF not exists idx_rifas_orden on public.rifas using btree (orden, fecha_creacion) TABLESPACE pg_default;

create index IF not exists idx_rifas_slug on public.rifas using btree (slug) TABLESPACE pg_default;